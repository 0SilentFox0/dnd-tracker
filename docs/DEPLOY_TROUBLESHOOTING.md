# üîß –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º –∑ –¥–µ–ø–ª–æ—î–º –Ω–∞ Vercel

## –ü–æ–º–∏–ª–∫–∞: "Can't reach database server"

### –ü—Ä–∏—á–∏–Ω–∞:
Prisma –Ω–µ –º–æ–∂–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ Supabase –ø—ñ–¥ —á–∞—Å build –Ω–∞ Vercel.

### –†—ñ—à–µ–Ω–Ω—è 1: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Connection Pooling URI (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–ó–∞–º—ñ—Å—Ç—å –ø—Ä—è–º–æ–≥–æ connection string –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Connection Pooling URI:

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ Supabase Dashboard** ‚Üí **Settings** ‚Üí **Database**
2. –ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ–∫—Ü—ñ—é **Connection Pooling**
3. –°–∫–æ–ø—ñ—é–π—Ç–µ **Connection string** –∑ —Ñ–æ—Ä–º–∞—Ç—É:
   ```
   postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
   ```
4. **–û–Ω–æ–≤—ñ—Ç—å DATABASE_URL –Ω–∞ Vercel:**
   - Vercel Dashboard ‚Üí **Settings** ‚Üí **Environment Variables**
   - –ó–Ω–∞–π–¥—ñ—Ç—å `DATABASE_URL`
   - –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ Connection Pooling URI
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –¥–æ–¥–∞–Ω–æ –¥–ª—è **Production**, **Preview** —Ç–∞ **Development**

### –†—ñ—à–µ–Ω–Ω—è 2: –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤—Ä—É—á–Ω—É

–Ø–∫—â–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤–∂–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –∞–±–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —ó—Ö –≤—Ä—É—á–Ω—É:

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ Supabase Dashboard** ‚Üí **SQL Editor**
2. –°–∫–æ–ø—ñ—é–π—Ç–µ –≤–º—ñ—Å—Ç `prisma/migrations/init/migration.sql`
3. –í—Å—Ç–∞–≤—Ç–µ –≤ SQL Editor —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ (Run)
4. Build –∫–æ–º–∞–Ω–¥–∞ –≤–∂–µ –æ–Ω–æ–≤–ª–µ–Ω–∞ –≤ `vercel.json` —â–æ–± –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å build

### –†—ñ—à–µ–Ω–Ω—è 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Supabase

1. **–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –∞–∫—Ç–∏–≤–Ω–∞:**
   - Supabase Dashboard ‚Üí **Settings** ‚Üí **Database**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç—É

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Network Restrictions (—è–∫—â–æ —î):**
   - Supabase Dashboard ‚Üí **Settings** ‚Üí **Database** ‚Üí **Network Restrictions**
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –¥–æ–∑–≤–æ–ª–µ–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ Vercel

### –†—ñ—à–µ–Ω–Ω—è 4: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –æ–∫—Ä–µ–º–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º—ñ–≥—Ä–∞—Ü—ñ–π

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å –¥–µ–ø–ª–æ—é:

1. –°—Ç–≤–æ—Ä—ñ—Ç—å Vercel Post-Deploy Hook –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ GitHub Actions
2. –ê–±–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ Supabase Dashboard –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é

## –ü–æ—Ç–æ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

Build –∫–æ–º–∞–Ω–¥–∞ –≤ `vercel.json`:
```json
{
  "buildCommand": "prisma generate && next build"
}
```

–¶–µ –æ–∑–Ω–∞—á–∞—î:
- ‚úÖ Prisma Client –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å build
- ‚ùå –ú—ñ–≥—Ä–∞—Ü—ñ—ó –ù–ï –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å build (–∑–∞—Å—Ç–æ—Å–æ–≤—É–π—Ç–µ –≤—Ä—É—á–Ω—É)

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ `DATABASE_URL` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Connection Pooling URI
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –¥–µ–ø–ª–æ–π –Ω–∞ Vercel
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ build –ø—Ä–æ—Ü–µ—Å—É
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Å–∞–π—Ç –ø—Ä–∞—Ü—é—î: https://your-project.vercel.app
