# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UI –ë–æ–π–æ–≤–æ—ó –°–∏—Å—Ç–µ–º–∏

## –û–≥–ª—è–¥

–ü–µ—Ä–µ—Ä–æ–±–∫–∞ UI –±–∏—Ç–≤–∏ –∑ –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç—Ä–∏–≥–µ—Ä—ñ–≤ —Å–∫—ñ–ª—ñ–≤.

## –ù–æ–≤–∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ UI

### 1. BattleFieldView (–ö–æ–ª–∏ –ù–ï —Ö—ñ–¥ –≥—Ä–∞–≤—Ü—è)
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤—Å—ñ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤ –±–æ—é
- –®–∫–∞–ª–∞ —Ö–æ–¥—ñ–≤ –Ω–∞ 3 —Ä–∞—É–Ω–¥–∏ –≤–ø–µ—Ä–µ–¥
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π —Ä–µ–∂–∏–º (—Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥)

### 2. PlayerTurnView (–ö–æ–ª–∏ —Ö—ñ–¥ –≥—Ä–∞–≤—Ü—è)
- –ö–Ω–æ–ø–∫–∞ "–ü–æ—á–∞—Ç–∏ —Ö—ñ–¥"
- –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –º–æ—Ä–∞–ª—ñ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- –ü–∞–Ω–µ–ª—å –¥—ñ–π –∑ –∫–Ω–æ–ø–∫–∞–º–∏ –≤ 3 –∫–æ–ª–æ–Ω–∫–∏:
  - –†—è–¥ 1: "–ê—Ç–∞–∫–∞ –ë–ª–∏–∂–Ω—è" | "–ê—Ç–∞–∫–∞ –î–∞–ª—å–Ω—è" | "–ó–∞–∫–ª–∏–Ω–∞–Ω–Ω—è"
  - –†—è–¥ 2: "–ë–æ–Ω—É—Å–Ω–∞ –¥—ñ—è" | ... | "–ü—Ä–æ–ø—É—Å–∫ —Ö–æ–¥—É"

### 3. –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ú–æ–¥–∞–ª—å–Ω–∏—Ö –í—ñ–∫–æ–Ω

#### –î–ª—è –ê—Ç–∞–∫–∏:
1. –í–∏–±—ñ—Ä —Ç–∏–ø—É –∞—Ç–∞–∫–∏ (–ë–ª–∏–∂–Ω—è/–î–∞–ª—å–Ω—è) ‚Üí –í–∏–±—ñ—Ä –∑–±—Ä–æ—ó
2. –í–∏–±—ñ—Ä —Ü—ñ–ª—ñ
3. –ö–∏–¥–æ–∫ –ø–æ–ø–∞–¥–∞–Ω–Ω—è (1d20 + –±–æ–Ω—É—Å–∏)
4. –ö–∏–¥–æ–∫ —à–∫–æ–¥–∏ (–∫—É–±–∏–∫–∏ –æ–∫—Ä–µ–º–æ)

#### –î–ª—è –ó–∞–∫–ª–∏–Ω–∞–Ω–Ω—è/–ë–æ–Ω—É—Å–Ω–æ—ó –¥—ñ—ó:
1. –í–∏–±—ñ—Ä –∑–∞–∫–ª–∏–Ω–∞–Ω–Ω—è/–¥—ñ—ó
2. –í–∏–±—ñ—Ä —Ü—ñ–ª—ñ
3. –ö–∏–¥–æ–∫ –ø–æ–ø–∞–¥–∞–Ω–Ω—è (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
4. –ö–∏–¥–æ–∫ —à–∫–æ–¥–∏/–µ—Ñ–µ–∫—Ç—É

## –°–∏—Å—Ç–µ–º–∞ –¢—Ä–∏–≥–µ—Ä—ñ–≤ –°–∫—ñ–ª—ñ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –í–∏–∫–æ–Ω–∞–Ω–Ω—è
- `startRound` - –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ä–∞—É–Ω–¥—É
- `endRound` - –≤ –∫—ñ–Ω—Ü—ñ —Ä–∞—É–Ω–¥—É
- `beforeOwnerAttack` - –ø–µ—Ä–µ–¥ –∞—Ç–∞–∫–æ—é –≥—Ä–∞–≤—Ü—è
- `afterOwnerAttack` - –ø—ñ—Å–ª—è –∞—Ç–∞–∫–∏ –≥—Ä–∞–≤—Ü—è
- `beforeEnemyAttack` - –ø–µ—Ä–µ–¥ –∞—Ç–∞–∫–æ—é –≤–æ—Ä–æ–≥–∞
- `afterEnemyAttack` - –ø—ñ—Å–ª—è –∞—Ç–∞–∫–∏ –≤–æ—Ä–æ–≥–∞
- `beforeOwnerSpellCast` - –ø–µ—Ä–µ–¥ –∫–∞—Å—Ç–æ–º –∑–∞–∫–ª–∏–Ω–∞–Ω–Ω—è
- `afterOwnerSpellCast` - –ø—ñ—Å–ª—è –∫–∞—Å—Ç—É –∑–∞–∫–ª–∏–Ω–∞–Ω–Ω—è
- `beforeEnemySpellCast` - –ø–µ—Ä–µ–¥ –∫–∞—Å—Ç–æ–º –≤–æ—Ä–æ–≥–∞
- `afterEnemySpellCast` - –ø—ñ—Å–ª—è –∫–∞—Å—Ç—É –≤–æ—Ä–æ–≥–∞

### –ë–æ–Ω—É—Å–Ω—ñ –î—ñ—ó
- `bonusAction` - –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ –ø–∞–Ω–µ–ª—ñ –¥—ñ–π —è–∫ –æ–∫—Ä–µ–º—ñ –∫–Ω–æ–ø–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ —Å–ø–∏—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –±–æ–Ω—É—Å–Ω–∏—Ö –¥—ñ–π

### –°–∫–ª–∞–¥–Ω—ñ –¢—Ä–∏–≥–µ—Ä–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∫–æ–∂–Ω—ñ–π –∑–º—ñ–Ω—ñ —Å—Ç–∞–Ω—É
- –ü—Ä–∏–∫–ª–∞–¥: "if ally <= 15% HP" - —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –∫–æ–ª–∏ —Å–æ—é–∑–Ω–∏–∫ –º–∞—î ‚â§15% HP

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### BattleFieldView
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î ParticipantCard –¥–ª—è –≤—Å—ñ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤
- InitiativeTimeline - —à–∫–∞–ª–∞ —Ö–æ–¥—ñ–≤ –Ω–∞ 3 —Ä–∞—É–Ω–¥–∏
- –¢—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥ (–±–µ–∑ –¥—ñ–π)

### PlayerTurnView
- TurnStartButton - "–ü–æ—á–∞—Ç–∏ —Ö—ñ–¥"
- MoraleCheckDialog - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–æ—Ä–∞–ª—ñ
- ActionButtonsPanel - –ø–∞–Ω–µ–ª—å –∑ –∫–Ω–æ–ø–∫–∞–º–∏ –¥—ñ–π
- –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ –¥–ª—è –≤–∏–±–æ—Ä—É –¥—ñ–π

### InitiativeTimeline
- –ü–æ–∫–∞–∑—É—î –Ω–∞—Å—Ç—É–ø–Ω—ñ 3 —Ä–∞—É–Ω–¥–∏
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –ø–æ—Ä—è–¥–æ–∫ —Ö–æ–¥—ñ–≤
- –ü—ñ–¥—Å–≤—ñ—á—É—î –ø–æ—Ç–æ—á–Ω–∏–π —Ö—ñ–¥

### ActionButtonsPanel
- 3 –∫–æ–ª–æ–Ω–∫–∏ –∫–Ω–æ–ø–æ–∫
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω
- –î–∏–Ω–∞–º—ñ—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –±–æ–Ω—É—Å–Ω–∏—Ö –¥—ñ–π –∑ —Ç—Ä–∏–≥–µ—Ä—ñ–≤

## –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –¢—Ä–∏–≥–µ—Ä—ñ–≤

### evaluateSkillTrigger
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø—Ä–æ—Å—Ç–∏–π —Ç—Ä–∏–≥–µ—Ä
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Å–∫–ª–∞–¥–Ω–∏–π —Ç—Ä–∏–≥–µ—Ä (—É–º–æ–≤–∏)
- –ü–æ–≤–µ—Ä—Ç–∞—î true/false

### getSkillsByTrigger
- –û—Ç—Ä–∏–º—É—î –≤—Å—ñ —Å–∫—ñ–ª–∏ –∑ –ø–µ–≤–Ω–∏–º —Ç—Ä–∏–≥–µ—Ä–æ–º
- –§—ñ–ª—å—Ç—Ä—É—î –∑–∞ —É–º–æ–≤–∞–º–∏
- –ü–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤ —Å–∫—ñ–ª—ñ–≤

### executeSkillTrigger (TODO)
- –í–∏–∫–æ–Ω—É—î –µ—Ñ–µ–∫—Ç–∏ —Å–∫—ñ–ª–∞
- –ó–∞—Å—Ç–æ—Å–æ–≤—É—î –±–æ–Ω—É—Å–∏/–µ—Ñ–µ–∫—Ç–∏
- –î–æ–¥–∞—î –∞–∫—Ç–∏–≤–Ω—ñ –µ—Ñ–µ–∫—Ç–∏

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### –í BattlePage
- –í–∏–∑–Ω–∞—á–∞—î —á–∏ —Ü–µ —Ö—ñ–¥ –≥—Ä–∞–≤—Ü—è
- –ü–æ–∫–∞–∑—É—î BattleFieldView –∞–±–æ PlayerTurnView
- –û–±—Ä–æ–±–ª—è—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç—Ä–∏–≥–µ—Ä–∏

### –í API Routes
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Ç—Ä–∏–≥–µ—Ä–∏ –ø—Ä–∏ –∫–æ–∂–Ω—ñ–π –¥—ñ—ó
- –í–∏–∫–æ–Ω—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏
- –û–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω –±–æ—é

## –°—Ç–∞—Ç—É—Å –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ:
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ `BattleFieldView` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ `PlayerTurnView` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ `InitiativeTimeline` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ `ActionButtonsPanel` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ `skillTriggers` –≤ `ActiveSkill`
- [x] –°—Ç–≤–æ—Ä–µ–Ω–æ —É—Ç–∏–ª—ñ—Ç–∏ `evaluateSkillTrigger` —Ç–∞ `getSkillsByTrigger`
- [x] –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –Ω–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤ `BattlePage`

### ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—ñ:
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç—Ä–∏–≥–µ—Ä—ñ–≤ –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ —É–º–æ–≤
- [ ] –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω
- [ ] –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –≤–∏–±–æ—Ä—É –∑–∞–∫–ª–∏–Ω–∞–Ω–Ω—è/–±–æ–Ω—É—Å–Ω–æ—ó –¥—ñ—ó

### üìã –ü–ª–∞–Ω—É—î—Ç—å—Å—è:
- [ ] –í–∏–∫–æ–Ω–∞–Ω–Ω—è –±–æ–Ω—É—Å–Ω–∏—Ö –¥—ñ–π –∑ —Ç—Ä–∏–≥–µ—Ä—ñ–≤
- [ ] –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Ç—Ä–∏–≥–µ—Ä—ñ–≤ –≤ API routes
